<!doctype html>
<html lang="en">

<head>
    <link rel="stylesheet" href="main.css">
    <meta charset="utf-8" />
    <title>Health Insurance Risk Calculator</title>
</head>

<body>
    <h1>The Scrumpateer's Health Insurance Risk Calculator</h1>
    <br>
    <br>
    <section>
        <h2>Please fill out the form to discover your risk:</h2>
        <p>Systolic blood pressure is the top number while diastolic blood pressure is the bottom number.</p>
        <form action="/calculations" method="POST">
            <label for="age">Age:</label><br>
            <input type="text" id="age" name="age"><br><br>
            <label for="height">Height (in inches):</label><br>
            <input type="text" id="height" name="height"><br><br>
            <label for="weight">Weight (in pounds):</label><br>
            <input type="text" id="weight" name="weight"><br><br>
            <label for="systolic">Blood Pressure (Systolic):</label><br>
            <input type="text" id="systolic" name="systolic"><br><br>
            <label for="diastolic">Blood Pressure (Diastolic):</label><br>
            <input type="text" id="diastolic" name="diastolic"><br><br>
            <input type="checkbox" id="diabetes" name="diabetes" value="diabetes">
            <label for="diabetes"> Family history of diabetes</label><br><br>
            <input type="checkbox" id="cancer" name="cancer" value="cancer">
            <label for="cancer"> Family history of cancer</label><br><br>
            <input type="checkbox" id="alzheimer" name="alzheimer" value="alzheimer">
            <label for="alzheimer"> Family history of Alzheimer's</label><br><br>
        </form>
        <button type="button" class="submit" onclick="fetchCalc()">Submit</button>
    </section>
    <p id="result">This is the result: </p>
    <script>
        async function fetchCalc() {
            const age = document.getElementById("age").value
            const height = document.getElementById("height").value
            const weight = document.getElementById("weight").value
            const systolic = document.getElementById("systolic").value
            const diastolic = document.getElementById("diastolic").value
            const diabetes = document.getElementById("diabetes").checked
            const cancer = document.getElementById("cancer").checked
            const alzheimer = document.getElementById("alzheimer").checked
		// Note the URL (fetch) string will look something like '/add-two-integers?x=2&y=1' when it is sent.
		    const fetchString = "/calculations?age="+age+"&height="+height+"&weight="+weight+"&systolic="+systolic+"&diastolic="+diastolic+"&diabetes="+diabetes+"&cancer="+cancer+"&alzheimer="+alzheimer
            const response = await fetch(fetchString)
            const responseText = await response.text()
            document.getElementById("result").innerHTML = responseText
        }
    </script>
</body>

</html>